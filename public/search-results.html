<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Results - Roomify</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/styles/search-results.css">
</head>
<body>
    <nav class="navbar navbar-light bg-light">
        <div class="container">
            <a class="navbar-brand" href="index.html">Roomify</a>
        </div>
    </nav>

    <div class="container mt-4">
        <!-- Search Summary -->
        <div class="search-summary">
            <div id="search-details"></div>
        </div>

        <!-- Results Grid -->
        <div class="row" id="hotels-container">
            <!-- Hotel cards will be added here -->
        </div>

        <!-- No Results Message -->
        <div id="no-results" class="text-center d-none">
            <h3>No hotels found</h3>
            <p>Try adjusting your search criteria</p>
            <a href="index.html" class="btn btn-primary mt-3">Back to Search</a>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Get URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            
            // Get search results
            const results = JSON.parse(urlParams.get('results') || '[]');

            // Update search summary
            const searchDetails = document.getElementById('search-details');
            let summaryText = `<h4>Search Results</h4>`;
            
            const location = urlParams.get('location');
            const hotelName = urlParams.get('hotelName');
            const checkIn = urlParams.get('checkIn');
            const checkOut = urlParams.get('checkOut');
            const guests = urlParams.get('guests');

            if (location) summaryText += `<p>Location: ${location}</p>`;
            if (hotelName) summaryText += `<p>Hotel Name: ${hotelName}</p>`;
            if (checkIn) summaryText += `<p>Check-in: ${checkIn}</p>`;
            if (checkOut) summaryText += `<p>Check-out: ${checkOut}</p>`;
            if (guests) summaryText += `<p>Guests: ${guests}</p>`;
            summaryText += `<p>Found ${results.length} hotels</p>`;
            
            searchDetails.innerHTML = summaryText;

            // Display results
            const hotelsContainer = document.getElementById('hotels-container');
            const noResults = document.getElementById('no-results');

            if (results && results.length > 0) {
                results.forEach(hotel => {
                    const card = document.createElement('div');
                    card.className = 'col-md-4 mb-4';
                    card.innerHTML = `
                        <div class="hotel-card">
                            <img src="${hotel.image_url}" class="hotel-image" alt="${hotel.name}">
                            <div class="card-body p-3">
                                <h5>${hotel.name}</h5>
                                <p>${hotel.location}</p>
                                <p>${hotel.description}</p>
                                <p class="price">$${hotel.price_per_night} per night</p>
                                <p>Total Rooms: ${hotel.total_rooms}</p>
                                <button class="btn btn-primary w-100">Book Now</button>
                            </div>
                        </div>
                    `;
                    hotelsContainer.appendChild(card);
                });
                noResults.classList.add('d-none');
            } else {
                hotelsContainer.classList.add('d-none');
                noResults.classList.remove('d-none');
            }
        });
    </script>
</body>
</html>
